<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Task 4</title>
    <style>
      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
      }

      table,
      th,
      td {
        border: 1px solid black;
      }

      td,
      th {
        padding: 8px;
      }
    </style>
  </head>

  <body>
    <script>
      /*
        Задание:
        Create a table (table, tr, td) based on an array of objects named source. 
        Each object is a separate table row. The month property is the value for the first column.
        The amont property is the value for the second column.
        */

      let source = [
        {
          month: "January",
          amount: 35,
          test: 1,
        },
        {
          month: "February",
          amount: 140,
          test: 1,
        },
        {
          month: "March",
          amount: 115,
          test: 1,
        },
        {
          month: "April",
          amount: 40,
          test: 1,
        },
        {
          month: "May",
          amount: 80,
          test: 1,
        },
        {
          month: "June",
          amount: 92,
          test: 1,
        },
        {
          month: "July",
          amount: 105,
          test: 1,
        },
      ];

      // An example with a universal method that will automatically add columns for each property in an object
      // try adding an additional property to each object in the source array to check

      function createCaption(object) {
        let tr = document.createElement("tr");
        for (const key in object) {
          // iterate over all properties of an object
          if (Object.hasOwnProperty.call(object, key)) {
            tr.append(createCell(key)); // creating a cell for each property name
          }
        }
        return tr;
      }

      function createRow(object) {
        let tr = document.createElement("tr");
        for (const key in object) {
          // iterate over all properties of an object
          if (Object.hasOwnProperty.call(object, key)) {
            const item = object[key];
            tr.append(createCell(item)); // creating a cell for each property name
          }
        }
        return tr;
      }

      function createCell(text) {
        let td = document.createElement("td");
        td.textContent = text;
        return td;
      }

      let table = document.createElement("table");
      table.append(createCaption(source[0])); // creating the first line with column names

      for (const item of source) {
        table.append(createRow(item));
      }

      document.body.append(table);
    </script>
  </body>
</html>
